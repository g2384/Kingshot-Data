<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Heroes Archive</title>
    <style>
        :root {
            --bg-main: #1a1d21;
            --bg-card: #282c34;
            --bg-hover: #2c313a;
            --bg-class: #4a4a4a;
            --text-primary: #e1e7ef;
            --text-secondary: #a3aab8;
            --border-color: #363b44;
            --shadow-color: rgba(0, 0, 0, 0.2);
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, system-ui, sans-serif;
            background: var(--bg-main);
            color: var(--text-primary);
            line-height: 1.5;
            padding: var(--spacing-sm);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 {
            margin: var(--spacing-lg) 0 var(--spacing-md);
            font-size: clamp(1.5rem, 5vw, 2rem);
            letter-spacing: 0.5px;
            font-weight: 600;
            text-align: center;
            color: var(--text-primary);
        }

        .table-container {
            background: var(--bg-card);
            margin: var(--spacing-md) auto;
            padding: var(--spacing-sm);
            border-radius: 1rem;
            box-shadow: 0 4px 16px var(--shadow-color);
            width: min(100%, 1900px);
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-card);
            font-size: 0.95rem;
        }

        th, td {
            padding: var(--spacing-sm);
            border-bottom: 1px solid var(--border-color);
            text-align: left;
            color: var(--text-primary);
            vertical-align: middle;
        }

        th {
            background: var(--bg-hover);
            font-weight: 600;
            color: var(--text-secondary);
            position: sticky;
            top: 0;
            z-index: 1;
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover {
            background: var(--bg-hover);
            transition: background-color 0.2s ease;
        }

        img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 0.5rem;
            box-shadow: 0 2px 8px var(--shadow-color);
            padding: var(--spacing-xs);
            transition: transform 0.2s ease;
        }

        img:hover {
            transform: scale(1.05);
        }

        .hero-rare img {
            background-color: #66a2e8;
        }

        .hero-epic img {
            background-color: #9d6ae0;
        }

        .hero-legendary img {
            background-color: #e6a449;
        }

        /* Lineup table styles */
        #lineupsTable {
            border-spacing: 0;
            border-collapse: separate;
        }

        #lineupsTable td {
            padding: var(--spacing-sm);
            text-align: center;
        }

        .lineup-index {
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.9em;
        }

        .hero-cell img {
            width: 48px;
            height: 48px;
            display: block;
            margin: 0 auto var(--spacing-xs);
            border-radius: 0.5rem;
        }

        .hero-name {
            font-size: 0.9em;
            margin-bottom: var(--spacing-xs);
        }

        .hero-class {
            font-size: 0.8em;
            color: var(--text-secondary);
            background: var(--bg-class);
            padding: 2px 8px;
            border-radius: 4px;
            display: inline-block;
            border: 1px solid var(--border-color);
        }

        /* Counter chart styles */
        .counter-chart {
            background: var(--bg-card);
            padding: var(--spacing-md);
            border-radius: 1rem;
            box-shadow: 0 4px 16px var(--shadow-color);
            margin: var(--spacing-md) auto;
            text-align: center;
            max-width: 600px;
            width: 100%;
        }

        .counter-title {
            color: var(--text-primary);
            font-size: 1.1em;
            margin-bottom: var(--spacing-sm);
            font-weight: 500;
        }

        .counter-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-xs);
            flex-wrap: wrap;
        }

        .counter-item {
            font-size: 1.5rem;
            padding: var(--spacing-xs);
            background: var(--bg-hover);
            border-radius: 0.5rem;
            min-width: 2.5rem;
            border: 1px solid var(--border-color);
            transition: transform 0.2s ease;
        }

        .counter-item:hover {
            transform: scale(1.1);
        }

        .counter-arrow {
            color: #3b82f6;
            font-size: 1.2rem;
        }

        .counter-bonus {
            font-size: 0.9em;
            color: var(--text-secondary);
            margin-top: var(--spacing-xs);
        }

        @media (max-width: 768px) {
            :root {
                --spacing-sm: 0.75rem;
                --spacing-md: 1rem;
                --spacing-lg: 1.5rem;
            }

            body {
                padding: var(--spacing-xs);
            }

            .table-container {
                margin: var(--spacing-sm) auto;
                padding: var(--spacing-xs);
                border-radius: 0.75rem;
            }

            table, thead, tbody, th, td, tr {
                display: block;
            }

            thead tr {
                position: absolute;
                top: -9999px;
                left: -9999px;
            }

            tr {
                position: relative;
                margin-bottom: var(--spacing-sm);
                background: var(--bg-card);
                border-radius: 0.75rem;
                box-shadow: 0 2px 8px var(--shadow-color);
                padding: var(--spacing-sm);
            }

            td {
                border: none;
                position: relative;
                padding-left: 50%;
                min-height: 2.5em;
                border-bottom: 1px solid var(--border-color);
            }

            td:last-child {
                border-bottom: none;
            }

            td:before {
                position: absolute;
                left: var(--spacing-sm);
                top: 50%;
                transform: translateY(-50%);
                width: 40%;
                white-space: nowrap;
                font-weight: 500;
                color: var(--text-secondary);
                font-size: 0.9em;
            }

            td:nth-child(1) {
                padding-left: 0;
                display: flex;
                justify-content: center;
            }

            td:nth-child(1):before {
                content: none;
            }

            td:nth-child(2):before {
                content: "Name";
            }

            td:nth-child(3):before {
                content: "Class";
            }

            td:nth-child(4):before {
                content: "Details";
            }

            td:nth-child(5):before {
                content: "Expedition Skills";
            }

            .counter-row {
                padding: 0 var(--spacing-xs);
            }

            .counter-item {
                font-size: 1.2rem;
            }
        }
    </style>
</head>

<body>
    <h1>Heroes Archive</h1>
    <div class="counter-chart">
        <div class="counter-title">Class Advantage:</div>
        <div class="counter-row">
            <span class="counter-item">üêé</span>
            <span class="counter-arrow">‚ûú</span>
            <span class="counter-item">üèπ</span>
            <span class="counter-arrow">‚ûú</span>
            <span class="counter-item">üõ°Ô∏è</span>
            <span class="counter-arrow">‚ûú</span>
            <span class="counter-item">üêé</span>
        </div>
        <div class="counter-bonus">+10% Damage</div>
    </div>
    <!--<div id="lineups-section" class="table-container" style="max-width:800px;">
        <h2 style="margin-top:0;font-size:1.2em;color:var(--text-primary);">Lineups:</h2>
        <table id="lineupsTable" style="border-spacing:0;border-collapse:separate;">
            <thead>
                <tr>
                    <th style="width:40px;text-align:center;color:#666;font-weight:500;">#</th>
                    <th colspan="5"></th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>-->
    <div class="table-container">
        <h2 style="margin-top:0;font-size:1.5em;color:var(--text-primary);">Generation 1 Heroes</h2>
        <table id="gen1Table">
            <thead>
                <tr>
                    <th>Hero Image</th>
                    <th>Name</th>
                    <th>Class</th>
                    <th>Details</th>
                    <th>Expedition Skills</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <div class="table-container">
        <h2 style="margin-top:0;font-size:1.5em;color:var(--text-primary);">Generation 2 Heroes</h2>
        <table id="gen2Table">
            <thead>
                <tr>
                    <th>Hero Image</th>
                    <th>Name</th>
                    <th>Class</th>
                    <th>Details</th>
                    <th>Expedition Skills</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <div class="table-container">
        <h2 style="margin-top:0;font-size:1.5em;color:var(--text-primary);">Generation 3 Heroes</h2>
        <table id="gen3Table">
            <thead>
                <tr>
                    <th>Hero Image</th>
                    <th>Name</th>
                    <th>Class</th>
                    <th>Details</th>
                    <th>Expedition Skills</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <div class="table-container">
        <h2 style="margin-top:0;font-size:1.5em;color:var(--text-primary);">Epic Heroes</h2>
        <table id="epicTable">
            <thead>
                <tr>
                    <th>Hero Image</th>
                    <th>Name</th>
                    <th>Class</th>
                    <th>Details</th>
                    <th>Expedition Skills</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <div class="table-container">
        <h2 style="margin-top:0;font-size:1.5em;color:var(--text-primary);">Gatherers</h2>
        <table id="gatherersTable">
            <thead>
                <tr>
                    <th>Hero Image</th>
                    <th>Name</th>
                    <th>Class</th>
                    <th>Details</th>
                    <th>Expedition Skills</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <script>
        // Helper: icon for resource type and class types
        function getSkillIcon(skill) {
            if (/iron/i.test(skill)) return "‚õìÔ∏è";
            if (/bread/i.test(skill)) return "ü•ñ";
            if (/stone/i.test(skill)) return "ü™®";
            if (/wood/i.test(skill)) return "ü™µ";
            if (/Lethality/i.test(skill)) return "üó°Ô∏è";
            if (/Attack/i.test(skill)) return "‚öîÔ∏è";
            if (/Health/i.test(skill)) return "‚ù§Ô∏è";
            if (/Healing/i.test(skill)) return "üíä";
            if (/Damage/i.test(skill)) return "üí•";
            if (/Speed/i.test(skill)) return "‚ö°";
            if (/Research/i.test(skill)) return "üìö";
            if (/Resource/i.test(skill)) return "üíé";
            return "üéØ";
        }

        function getClassIcon(className) {
            switch(className.toLowerCase()) {
                case 'infantry': return 'üõ°Ô∏è';
                case 'archer': return 'üèπ';
                case 'cavalry': return 'üê¥';
                default: return className;
            }
        }

        function createHeroRow(hero) {
            const row = document.createElement("tr");
            row.classList.add('hero-' + hero.rarity.toLowerCase());

            const imgCell = document.createElement("td");
            const img = document.createElement("img");
            img.src = hero.image;
            img.alt = hero.name;
            imgCell.appendChild(img);
            row.appendChild(imgCell);

            const nameCell = document.createElement("td");
            nameCell.textContent = hero.name;
            row.appendChild(nameCell);

            const attrCell = document.createElement("td");
            attrCell.textContent = getClassIcon(hero.class);
            row.appendChild(attrCell);

            const detailsCell = document.createElement("td");
            detailsCell.textContent = hero.details;
            row.appendChild(detailsCell);

            const expeditionCell = document.createElement("td");
            let expeditionSkills = hero.expeditionSkills;
            if (Array.isArray(expeditionSkills) && expeditionSkills.length > 0) {
                expeditionCell.innerHTML = expeditionSkills
                    .map(skill => `<div>${getSkillIcon(skill)} ${skill}</div>`)
                    .join("");
            } else if (typeof expeditionSkills === "string" && expeditionSkills.trim() !== "") {
                expeditionCell.innerHTML = `<div>${getSkillIcon(expeditionSkills)} ${expeditionSkills}</div>`;
            } else {
                expeditionCell.textContent = "";
            }
            row.appendChild(expeditionCell);

            return row;
        }

        window.onload = function () {
            // Load and display lineups
            fetch('lineups.json')
                .then(response => response.json())
                .then(data => {
                    const lineupsBody = document.querySelector("#lineupsTable tbody");
                    
                    // First load heroes.json to get hero details
                    fetch('heroes.json')
                        .then(response => response.json())
                        .then(heroesData => {
                            // Create a map of hero details for quick lookup
                            const heroMap = new Map();
                            // Combine all hero types into one map
                            [...(heroesData.Gen1 || []), ...(heroesData.Gen2 || []), ...(heroesData.Gen3 || []), ...(heroesData.Epic || [])]
                                .forEach(hero => {
                                    heroMap.set(hero.name, {
                                        image: hero.image,
                                        class: hero.class
                                    });
                                });

                            // Now process lineups
                            data.lineupsGen1.forEach((lineup, index) => {
                                const row = document.createElement('tr');
                                
                                // Add index number cell
                                const indexCell = document.createElement('td');
                                indexCell.textContent = (index + 1);
                                indexCell.className = 'lineup-index';
                                row.appendChild(indexCell);

                                const heroes = lineup.split(',');
                                heroes.forEach(heroName => {
                                    const td = document.createElement('td');
                                    td.className = 'hero-cell';
                                    
                                    const heroInfo = heroMap.get(heroName);
                                    if (heroInfo) {
                                        // Create hero image
                                        const img = document.createElement('img');
                                        img.src = heroInfo.image;
                                        img.alt = heroName;
                                        
                                        // Add hero name and class
                                        const nameDiv = document.createElement('div');
                                        nameDiv.className = 'hero-name';
                                        nameDiv.textContent = heroName;

                                        const classDiv = document.createElement('div');
                                        classDiv.className = 'hero-class';
                                        classDiv.textContent = getClassIcon(heroInfo.class);
                                        
                                        td.appendChild(img);
                                        td.appendChild(nameDiv);
                                        td.appendChild(classDiv);
                                    }
                                    row.appendChild(td);
                                });
                                
                                lineupsBody.appendChild(row);
                            });
                        })
                        .catch(error => console.error("Error loading hero details:", error));
                })
                .catch(error => console.error("Error loading lineups:", error));

            // Load heroes and gatherers tables
            fetch('heroes.json')
                .then(response => response.json())
                .then(data => {
                    // Populate Gen1 Heroes table
                    const gen1TableBody = document.querySelector("#gen1Table tbody");
                    if (data.Gen1) {
                        data.Gen1.forEach(hero => {
                            gen1TableBody.appendChild(createHeroRow(hero));
                        });
                    }

                    // Populate Gen2 Heroes table
                    const gen2TableBody = document.querySelector("#gen2Table tbody");
                    if (data.Gen2) {
                        data.Gen2.forEach(hero => {
                            gen2TableBody.appendChild(createHeroRow(hero));
                        });
                    }

                    // Populate Gen3 Heroes table
                    const gen3TableBody = document.querySelector("#gen3Table tbody");
                    if (data.Gen3) {
                        data.Gen3.forEach(hero => {
                            gen3TableBody.appendChild(createHeroRow(hero));
                        });
                    }

                    // Populate Epic Heroes table
                    const epicTableBody = document.querySelector("#epicTable tbody");
                    if (data.Epic) {
                        data.Epic.forEach(hero => {
                            epicTableBody.appendChild(createHeroRow(hero));
                        });
                    }

                    // Populate Gatherers table
                    const gatherersTableBody = document.querySelector("#gatherersTable tbody");
                    if (data.Gatherers) {
                        data.Gatherers.forEach(hero => {
                            gatherersTableBody.appendChild(createHeroRow(hero));
                        });
                    }
                })
                .catch(error => console.error("Error loading JSON data:", error));
        };
    </script>
</body>

</html>