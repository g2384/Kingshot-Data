<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Heroes Archive</title>
    <style>
        :root {
            --bg-main: #1a1d21;
            --bg-card: #282c34;
            --bg-hover: #2c313a;
            --bg-class: #4a4a4a;
            --text-primary: #e1e7ef;
            --text-secondary: #a3aab8;
            --border-color: #363b44;
            --shadow-color: rgba(0, 0, 0, 0.2);
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: var(--bg-main);
            color: var(--text-primary);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 {
            margin-top: 2rem;
            margin-bottom: 1.5rem;
            font-size: 2rem;
            letter-spacing: 1px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .table-container {
            background: var(--bg-card);
            margin: 2rem 1.5rem;
            border-radius: 1rem;
            box-shadow: 0 4px 24px var(--shadow-color);
            margin-bottom: 2rem;
            width: 100%;
            max-width: 1900px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-card);
        }

        th,
        td {
            padding: 0.75em 0.5em;
            border-bottom: 1px solid var(--border-color);
            text-align: left;
            color: var(--text-primary);
        }

        th {
            background: var(--bg-hover);
            font-weight: 600;
            font-size: 1em;
            color: var(--text-secondary);
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover {
            background: var(--bg-hover);
        }

        img {
            width: 70px;
            border-radius: 0.5em;
            box-shadow: 0 2px 8px var(--shadow-color);
            padding: 5px;
        }

        tr[data-rarity="rare"] img {
            background-color: #66a2e8;
        }

        tr[data-rarity="epic"] img {
            background-color: #9d6ae0;
        }

        tr[data-rarity="legendary"] img {
            background-color: #e6a449;
        }

        /* Lineup table styles */
        #lineupsTable {
            border-spacing: 0;
            border-collapse: separate;
        }

        #lineupsTable td {
            padding: 8px;
            text-align: center;
        }

        .lineup-index {
            text-align: center;
            color: #666;
            font-size: 0.9em;
        }

        .hero-cell img {
            width: 48px;
            height: 48px;
            display: block;
            margin: 0 auto 4px auto;
            border-radius: 8px;
        }

        .hero-name {
            font-size: 0.9em;
            margin-bottom: 2px;
        }

        .hero-class {
            font-size: 0.8em;
            color: var(--text-secondary);
            background: var(--bg-class);
            padding: 2px 8px;
            border-radius: 4px;
            display: inline-block;
            border: 1px solid var(--border-color);
        }

        /* Counter chart styles */
        .counter-chart {
            background: var(--bg-card);
            padding: 1.2rem 1.5rem;
            border-radius: 1rem;
            box-shadow: 0 4px 24px var(--shadow-color);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .counter-title {
            color: var(--text-primary);
            font-size: 1em;
            margin-bottom: 0.8rem;
        }

        .counter-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
            margin-bottom: 0.5rem;
        }

        .counter-item {
            font-size: 1.5rem;
            padding: 0.5rem;
            background: var(--bg-hover);
            border-radius: 0.5rem;
            min-width: 2.5rem;
            border: 1px solid var(--border-color);
        }

        .counter-arrow {
            color: #3b82f6;
            font-size: 1.2rem;
        }

        .counter-bonus {
            font-size: 0.9em;
            color: #666;
        }

        @media (max-width: 700px) {
            .table-container {
                padding: 1rem 0.2rem;
            }

            table,
            thead,
            tbody,
            th,
            td,
            tr {
                display: block;
            }

            thead {
                display: none;
            }

            tr {
                margin-bottom: 1.2em;
                background: #fff;
                border-radius: 0.7em;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
                padding: 0.7em 0.5em;
            }

            td {
                border: none;
                position: relative;
                padding-left: 50%;
                min-height: 2.2em;
            }

            td:before {
                position: absolute;
                left: 0.7em;
                top: 0.7em;
                width: 45%;
                white-space: nowrap;
                font-weight: 600;
                color: #888;
                font-size: 0.98em;
            }

            td:nth-child(1):before {
                content: "Hero Image";
            }

            td:nth-child(2):before {
                content: "Name";
            }

            td:nth-child(3):before {
                content: "Class";
            }

            td:nth-child(4):before {
                content: "Rarity";
            }

            td:nth-child(5):before {
                content: "Details";
            }

            td:nth-child(6):before {
                content: "Expedition Skills";
            }
        }
    </style>
</head>

<body>
    <h1>Heroes Archive</h1>
    <div class="counter-chart">
        <div class="counter-title">Class Advantage:</div>
        <div class="counter-row">
            <span class="counter-item">üêé</span>
            <span class="counter-arrow">‚ûú</span>
            <span class="counter-item">üèπ</span>
            <span class="counter-arrow">‚ûú</span>
            <span class="counter-item">üõ°Ô∏è</span>
            <span class="counter-arrow">‚ûú</span>
            <span class="counter-item">üêé</span>
        </div>
        <div class="counter-bonus">+10% Damage</div>
    </div>
    <div id="lineups-section" class="table-container" style="max-width:800px;">
        <h2 style="margin-top:0;font-size:1.2em;color:var(--text-primary);">Lineups:</h2>
        <table id="lineupsTable" style="border-spacing:0;border-collapse:separate;">
            <thead>
                <tr>
                    <th style="width:40px;text-align:center;color:#666;font-weight:500;">#</th>
                    <th colspan="5"></th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <div class="table-container">
        <h2 style="margin-top:0;font-size:1.5em;color:var(--text-primary);">Heroes</h2>
        <table id="heroesTable">
            <thead>
                <tr>
                    <th>Hero Image</th>
                    <th>Name</th>
                    <th>Class</th>
                    <th>Rarity</th>
                    <th>Details</th>
                    <th>Expedition Skills</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <div class="table-container">
        <h2 style="margin-top:2rem;font-size:1.5em;color:var(--text-primary);">Gatherers</h2>
        <table id="gatherersTable">
            <thead>
                <tr>
                    <th>Hero Image</th>
                    <th>Name</th>
                    <th>Class</th>
                    <th>Rarity</th>
                    <th>Details</th>
                    <th>Expedition Skills</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <script>
        // Helper: icon for resource type and class types
        function getSkillIcon(skill) {
            if (/iron/i.test(skill)) return "‚õìÔ∏è";
            if (/bread/i.test(skill)) return "ü•ñ";
            if (/stone/i.test(skill)) return "ü™®";
            if (/wood/i.test(skill)) return "ü™µ";
            if (/Lethality/i.test(skill)) return "üó°Ô∏è";
            if (/Attack/i.test(skill)) return "‚öîÔ∏è";
            if (/Health/i.test(skill)) return "‚ù§Ô∏è";
            if (/Healing/i.test(skill)) return "üíä";
            if (/Damage/i.test(skill)) return "üí•";
            if (/Speed/i.test(skill)) return "‚ö°";
            if (/Research/i.test(skill)) return "üìö";
            if (/Resource/i.test(skill)) return "üíé";
            return "üéØ";
        }

        function getClassIcon(className) {
            switch(className.toLowerCase()) {
                case 'infantry': return 'üõ°Ô∏è';
                case 'archer': return 'üèπ';
                case 'cavalry': return 'üê¥';
                default: return className;
            }
        }

        function createHeroRow(hero) {
            const row = document.createElement("tr");
            row.setAttribute('data-rarity', hero.rarity.toLowerCase());

            const imgCell = document.createElement("td");
            const img = document.createElement("img");
            img.src = hero.image;
            img.alt = hero.name;
            imgCell.appendChild(img);
            row.appendChild(imgCell);

            const nameCell = document.createElement("td");
            nameCell.textContent = hero.name;
            row.appendChild(nameCell);

            const attrCell = document.createElement("td");
            attrCell.textContent = getClassIcon(hero.class);
            row.appendChild(attrCell);

            const genCell = document.createElement("td");
            genCell.textContent = hero.rarity;
            row.appendChild(genCell);

            const detailsCell = document.createElement("td");
            detailsCell.textContent = hero.details;
            row.appendChild(detailsCell);

            const expeditionCell = document.createElement("td");
            let expeditionSkills = hero.expeditionSkills;
            if (Array.isArray(expeditionSkills) && expeditionSkills.length > 0) {
                expeditionCell.innerHTML = expeditionSkills
                    .map(skill => `<div>${getSkillIcon(skill)} ${skill}</div>`)
                    .join("");
            } else if (typeof expeditionSkills === "string" && expeditionSkills.trim() !== "") {
                expeditionCell.innerHTML = `<div>${getSkillIcon(expeditionSkills)} ${expeditionSkills}</div>`;
            } else {
                expeditionCell.textContent = "";
            }
            row.appendChild(expeditionCell);

            return row;
        }

        window.onload = function () {
            // Load and display lineups
            fetch('lineups.json')
                .then(response => response.json())
                .then(data => {
                    const lineupsBody = document.querySelector("#lineupsTable tbody");
                    
                    // First load heroes.json to get hero details
                    fetch('heroes.json')
                        .then(response => response.json())
                        .then(heroesData => {
                            // Create a map of hero details for quick lookup
                            const heroMap = new Map();
                            heroesData.heroes.forEach(hero => {
                                heroMap.set(hero.name, {
                                    image: hero.image,
                                    class: hero.class
                                });
                            });

                            // Now process lineups
                            data.lineupsGen1.forEach((lineup, index) => {
                                const row = document.createElement('tr');
                                
                                // Add index number cell
                                const indexCell = document.createElement('td');
                                indexCell.textContent = (index + 1);
                                indexCell.className = 'lineup-index';
                                row.appendChild(indexCell);

                                const heroes = lineup.split(',');
                                heroes.forEach(heroName => {
                                    const td = document.createElement('td');
                                    td.className = 'hero-cell';
                                    
                                    const heroInfo = heroMap.get(heroName);
                                    if (heroInfo) {
                                        // Create hero image
                                        const img = document.createElement('img');
                                        img.src = heroInfo.image;
                                        img.alt = heroName;
                                        
                                        // Add hero name and class
                                        const nameDiv = document.createElement('div');
                                        nameDiv.className = 'hero-name';
                                        nameDiv.textContent = heroName;

                                        const classDiv = document.createElement('div');
                                        classDiv.className = 'hero-class';
                                        classDiv.textContent = getClassIcon(heroInfo.class);
                                        
                                        td.appendChild(img);
                                        td.appendChild(nameDiv);
                                        td.appendChild(classDiv);
                                    }
                                    row.appendChild(td);
                                });
                                
                                lineupsBody.appendChild(row);
                            });
                        })
                        .catch(error => console.error("Error loading hero details:", error));
                })
                .catch(error => console.error("Error loading lineups:", error));

            // Load heroes and gatherers tables
            fetch('heroes.json')
                .then(response => response.json())
                .then(data => {
                    // Populate Heroes table
                    const heroesTableBody = document.querySelector("#heroesTable tbody");
                    data.heroes.forEach(hero => {
                        heroesTableBody.appendChild(createHeroRow(hero));
                    });

                    // Populate Gatherers table
                    const gatherersTableBody = document.querySelector("#gatherersTable tbody");
                    if (data.Gatherers) {
                        data.Gatherers.forEach(hero => {
                            gatherersTableBody.appendChild(createHeroRow(hero));
                        });
                    }
                })
                .catch(error => console.error("Error loading JSON data:", error));
        };
    </script>
</body>

</html>